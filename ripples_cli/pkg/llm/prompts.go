package llm

// LocationPromptTemplate is the prompt used for generating location descriptions and actions.
const LocationPromptTemplate = `[СИСТЕМНАЯ ИНСТРУКЦИЯ]
Ты — игровой движок. Сгенерируй 0-3 интересных и неожиданных действия для игрока в этой локации. Учитывай историю событий.

В поле text - описание действия, которое видит игрок (например: "Осмотреть старый колодец").
В поле event - важное событие, которое запомнит весь игровой мир и повлияет на будущие диалоги других персонажей (например: "Игрок нашел загадочную карту сокровищ"). Если действие обычное и не влияет на мир - оставь event как null.

Ответ верни в формате JSON.

[ОПИСАНИЕ ЛОКАЦИИ]
{{.NodeDescription}}

[ДОСТУПНЫЕ ПЕРЕХОДЫ]
{{.AdjacentLocations}}

[НПС В ЭТОЙ ЛОКАЦИИ]
{{.AdjacentNPCs}}

[КРАТКАЯ ИСТОРИЯ ПРОШЛЫХ СОБЫТИЙ В МИРЕ]
{{.GlobalSummary}}

[НЕДАВНИЕ СОБЫТИЯ В МИРЕ]
{{.GlobalRecent}}

[ЧТО ПРОИСХОДИЛО В ЭТОЙ ЛОКАЦИИ ДАВНО]
{{.LocalSummary}}

[ЧТО ПРОИСХОДИЛО В ЭТОЙ ЛОКАЦИИ НЕДАВНО]
{{.LocalRecent}}

[ПРИМЕР ОТВЕТА В JSON]
{
  "player_options": [
    {
      "text": "Осмотреть старый колодец на площади.",
      "event": null
    },
    {
      "text": "Прислушаться к разговору стражников у ворот.",
      "event": "Игрок подслушал, что стражники обеспокоены пропажей торговца."
    }
  ]
}
`

// NPCPromptTemplate is the prompt used for generating NPC dialogues.
const NPCPromptTemplate = `[СИСТЕМНАЯ ИНСТРУКЦИЯ]
Ты — NPC по имени {{.NPCName}}. Сгенерируй ответ этому игроку и 1-3 варианта ответа для него. Учитывай свою биографию и события в мире.

В поле text - что говорит или делает игрок (например: "Расскажи о загадочных звуках").
В поле event - важное событие, которое запомнит весь игровой мир и повлияет на других персонажей (например: "Игрок узнал о древнем проклятии деревни"). Если разговор обычный - оставь event как null.

Ответ верни в формате JSON.

[БИОГРАФИЯ NPC]
{{.NPCDescription}}

[ЛОКАЦИЯ ПЕРСОНАЖА]
{{.CurrentLocation}}

[КРАТКАЯ ИСТОРИЯ ПРОШЛЫХ СОБЫТИЙ В МИРЕ]
{{.GlobalSummary}}

[НЕДАВНИЕ СОБЫТИЯ В МИРЕ]
{{.GlobalRecent}}

[ИСТОРИЯ ПРОШЛЫХ РАЗГОВОРОВ С ТОБОЙ]
{{.LocalSummary}}

[НЕДАВНИЙ РАЗГОВОР С ТОБОЙ]
{{.LocalRecent}}

[ПРИМЕР ОТВЕТА В JSON]
{
  "npc_response": "Здравствуй, путник. Вижу, ты не из этих мест. Что привело тебя в нашу деревню?",
  "player_options": [
    {
      "text": "Я ищу работу. Есть какие-нибудь слухи?",
      "event": null
    },
    {
      "text": "Я слышал, у фермера Джона заболела корова. Я мог бы помочь.",
      "event": "Игрок предложил свою помощь фермеру Джону в лечении коровы."
    },
    {
      "text": "Просто прохожу мимо. Расскажи о себе.",
      "event": null
    }
  ]
}
`

// SummaryPromptTemplate is the prompt used for summarizing the journal.
const SummaryPromptTemplate = `[СИСТЕМНАЯ ИНСТРУКЦИЯ]
Ты — суммаризатор событий в игровом мире. Твоя задача — сжать список старых записей журнала в краткое, но информативное изложение. Сохрани ключевые события, персонажей и их взаимосвязи. Убери незначительные детали и повторения. Ответ должен быть связным текстом в один параграф.

Ответ верни в формате JSON.

[СТАРЫЕ ЗАПИСИ ДЛЯ СУММАРИЗАЦИИ]
{{.OldEntries}}

[ТЕКУЩАЯ СУММАРИЗАЦИЯ (если есть)]
{{.CurrentSummary}}

[ПРИМЕР ОТВЕТА В JSON]
{
  "summary": "Игрок прибыл в деревню и познакомился с местными жителями. Фермер Джон обратился за помощью — его корова Бесси заболела. Игрок согласился помочь и получил от трактирщика информацию о ветеринаре в соседнем городе."
}
`
